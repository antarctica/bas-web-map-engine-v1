<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8"></meta>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <meta name="description" content="Map creation wizard"></meta>
        <meta name="author" content="David Herbert, British Antarctic Survey"></meta>
        <link rel="icon" type="image/vnd.microsoft.icon" href=""></link>
        <link rel="shortcut icon" type="image/vnd.microsoft.icon" href=""></link>
        <title></title>

        <link href="../static/css/ol.css" rel="stylesheet"></link>
        <link href="../static/css/bootstrap.min.css" rel="stylesheet"></link>
        <link href="../static/css/bootstrap-treeview.min.css" rel="stylesheet"></link>
        <link href="../static/css/nouislider.min.css" rel="stylesheet"></link>
        <link href="../static/css/prettify.css" rel="stylesheet"></link>
        <link href="../static/css/map.css" rel="stylesheet"></link>
        <link href="../static/css/font-awesome.min.css" rel="stylesheet" type="text/css"></link>
        <link href="../static/css/whhg-reduced.min.css" rel="stylesheet" type="text/css"></link>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="../static/js/ol.min.js"></script>
        <script src="../static/js/ellipsoid/ellipsoid.js"></script>
        <script src="../static/js/jquery.js"></script>
        <script src="../static/js/proj4.js"></script>
        <script src="../static/js/proj4defs/3031.js"></script>
        <script src="../static/js/bootstrap.min.js"></script>
        <script src="../static/js/typeahead.bundle.min.js"></script>
        <script src="../static/js/bootstrap-treeview.min.js"></script>
        <script src="../static/js/nouislider.min.js"></script>
        <script src="../static/js/prettify.js"></script>
        <script src="../static/js/components/init.js"></script>
        <script src="../static/js/modules/Common.js"></script>
        <script src="../static/js/modules/GeoUtils.js"></script>
        <script src="../static/js/components/AppContainer.js"></script>
        <script src="../static/js/components/Validation.js"></script>
        <script src="../static/js/components/LayerTree.js"></script>
        <script src="../static/js/components/ControlButtonRibbon.js"></script>
        <script src="../static/js/components/DragZoomButton.js"></script>
        <script src="../static/js/components/FullScreenButton.js"></script>
        <script src="../static/js/components/ResetRotationButton.js"></script>
        <script src="../static/js/components/HeightMeasureButton.js"></script>
        <script src="../static/js/components/FeaturePopup.js"></script>
        <script src="../static/js/components/FeatureInfoButton.js"></script>
        <script src="../static/js/components/Geosearch.js"></script>
        <script src="../static/js/components/Measurement.js"></script>
        <script src="../static/js/components/OverviewMap.js"></script>
        <script src="../static/js/components/AttributionModal.js"></script>
        <script src="../static/js/components/LayerTreeOptionsMenu.js"></script>
        <script th:inline="javascript">
            /*<![CDATA[*/
            magic.runtime.app = [[${app}]];
            /*]]>*/
        </script>
        <script type="text/javascript">

            $(document).ready(function () {
                var payloadRequest = $.ajax({
                    url: magic.config.paths.baseurl + "/appconfig/" + magic.runtime.app,
                    method: "GET",
                    dataType: "json"
                });
                payloadRequest.done(function (payload) {
                    magic.runtime.appcontainer = new magic.classes.AppContainer(payload);
                });
                payloadRequest.fail(function (xhr, status) {
                    alert("Failed to get config payload for application " + magic.runtime.app + ", error was " + status);
                });

            });

        </script>

    </head>

    <body>

        <div id="wrapper">

            <!-- Navigation -->
            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a id="appurl" href="Javascript:void(0)" target="_blank"><img id="applogo" class="applogo" src="../static/images/1x1.png" width="50" height="50" /></a>
                    <a class="navbar-brand" id="apptitle" href="#"></a>
                </div>
                <!-- Top Menu Items -->
                <ul class="nav navbar-left top-nav">
                    <li>
                        <a id="geosearch-tool" href="JavaScript:void(0)" role="button" data-toggle="popover" data-placement="bottom">
                            <span class="glyphicon glyphicon-pushpin"></span> Geosearch
                        </a>                        
                    </li>
                    <li>
                        <a id="measure-tool" href="JavaScript:void(0)" role="button"  data-toggle="popover" data-placement="bottom">
                            <span class="icon-ruler"></span> Measure 
                        </a>       
                    </li>
                    <li>
                        <a id="overview-map-tool" href="JavaScript:void(0)" role="button" data-toggle="popover" data-placement="bottom">
                            <span class="glyphicon glyphicon-picture"></span> Overview 
                        </a>       
                    </li>
                </ul>                                
                <ul class="nav navbar-right top-nav">
                    <li id="user-prefs" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> Not logged in <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#"><i class="fa fa-fw fa-user"></i> Profile</a>
                            </li>                            
                            <li>
                                <a href="#"><i class="fa fa-fw fa-power-off"></i> Log Out</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <div id="layer-tree" class="nav navbar-nav side-nav">

                    </div>
                </div>
                <!-- /.navbar-collapse -->
            </nav>

            <div id="map-container">            
                <div id="map"></div>
            </div>

        </div>
        <!-- /#wrapper -->

        <button class="layer-tree-expand btn btn-default" data-toggle="tooltip" data-placement="right" title="Expand layer tree">
            <span class="icon-layers"></span>
        </button>

        <!-- Popup for height measurement -->
        <div id="height-popup" title="DEM height"></div>               

    </body>

</html>
